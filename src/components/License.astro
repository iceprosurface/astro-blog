---
interface Props {
    title: string;
    author?: string;
    permalink?: string;
    className?: string;
}

const { title, author = "icepro", permalink, className = "" } = Astro.props;

const url = permalink
    ? new URL(permalink, Astro.site || Astro.url).href
    : Astro.url.href;
---

<div class={`license-container ${className}`}>
    <div class="license-text">
        <p>
            <b>本文标题：</b>
            <a href={url}>{title}</a>
        </p>
        <p>
            <b>永久链接：</b>
            <a href={url}>{url}</a>
        </p>
        <p>
            <b>作者授权：</b>本文由 {author}{" "}
            原创编译并授权刊载发布。
        </p>
        <p>
            <b>版权声明：</b>本文使用
            <a
                href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh-hans"
                target="_blank"
                rel="noopener noreferrer"
            >
                「署名-非商业性使用-相同方式共享 4.0 国际」
            </a>
            创作共享协议，转载或使用请遵守署名协议。
        </p>
    </div>
</div>

<style>
    .license-container {
        margin: 3rem 0;
        padding: 1rem 1.5rem;
        background: var(--light, #f8f9fa);
        border: 1px solid transparent; /* Flat style */
        border-left: 4px solid var(--secondary, #007bff);
        border-radius: 4px;
        display: flex;
        align-items: flex-start;
        gap: 1rem;
        transition: all 0.2s ease;
        font-size: 0.9rem;
        color: var(--darkgray, #495057);
    }

    .license-container:hover {
        border-color: var(--secondary, #007bff);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
    }

    .license-icon {
        color: var(--secondary, #007bff);
        display: flex;
        align-items: center;
        justify-content: center;
        padding-top: 0.25rem;
        flex-shrink: 0;
    }

    .license-text {
        flex: 1;
        overflow-wrap: break-word; /* 确保长链接换行 */
    }

    .license-text p {
        margin: 0.25rem 0;
        line-height: 1.6;
    }

    .license-text b {
        font-weight: 600;
        margin-right: 0.25rem;
    }

    .license-text a {
        color: var(--secondary, #007bff);
        text-decoration: none;
        border-bottom: 1px dashed var(--secondary, #007bff);
        transition: all 0.2s;
        word-break: break-all;
    }

    .license-text a:hover {
        color: var(--hover, #0056b3);
        border-bottom-style: solid;
    }
</style>
